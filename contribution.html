<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Contributing to subscript &mdash; subscript 0.15.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="History" href="history.html" />
    <link rel="prev" title="Subscript" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> subscript
            <img src="_static/equinor-logo2.jpg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.15.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing to subscript</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started-on-equinor-linux-computers">Getting started on Equinor Linux computers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started-as-a-developer">Getting started as a developer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#repository-conventions">Repository conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#maintenance-responsibility">Maintenance responsibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="#open-source">Open source</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-style">Code style</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-documentation">Building documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Scripts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="scripts/bjobsusers.html">BJOBSUSERS</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/casegen_upcars.html">CASEGEN_UPCARS</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/check_swatinit.html">CHECK_SWATINIT</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/convert_grid_format.html">CONVERT_GRID_FORMAT</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/csv2ofmvol.html">CSV2OFMVOL</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/csv_merge.html">CSV_MERGE</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/csv_stack.html">CSV_STACK</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/eclcompress.html">ECLCOMPRESS</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/ecldiff2roff.html">ECLDIFF2ROFF</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/fmuobs.html">FMUOBS</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/interp_relperm.html">INTERP_RELPERM</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/merge_rft_ertobs.html">MERGE_RFT_ERTOBS</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/merge_schedule.html">MERGE_SCHEDULE</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/ofmvol2csv.html">OFMVOL2CSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/pack_sim.html">PACK_SIM</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/params2csv.html">PARAMS2CSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/presentvalue.html">PRESENTVALUE</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/prtvol2csv.html">PRTVOL2CSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/restartthinner.html">RESTARTTHINNER</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/ri_wellmod.html">RI_WELLMOD</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/rmsecl_volumetrics.html">RMSECL_VOLUMETRICS</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/runeclipse.html">RUNECLIPSE</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/runrms.html">RUNRMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/sector2fluxnum.html">SECTOR2FLUXNUM</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/summaryplot.html">SUMMARYPLOT</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/sunsch.html">SUNSCH</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/sw_model_utilities.html">SW_MODEL_UTILITIES</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/vfp2csv.html">VFP2CSV</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts/welltest_dpds.html">WELLTEST_DPDS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="subscript/subscript.html"><code class="docutils literal notranslate"><span class="pre">subscript</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">subscript</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Contributing to subscript</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/contribution.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="contributing-to-subscript">
<h1>Contributing to subscript<a class="headerlink" href="#contributing-to-subscript" title="Permalink to this headline"></a></h1>
<section id="getting-started-on-equinor-linux-computers">
<h2>Getting started on Equinor Linux computers<a class="headerlink" href="#getting-started-on-equinor-linux-computers" title="Permalink to this headline"></a></h2>
<p>On Equinor Linux computers, is is recommended to run with the Komodo
environment, which will provide an analogue to <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> for making a
virtual environment.</p>
<p>Follow instructions on
<a class="reference external" href="https://fmu-docs.equinor.com/docs/komodo/equinor_komodo_usage.html">https://fmu-docs.equinor.com/docs/komodo/equinor_komodo_usage.html</a> for
activating a Komodo release, and perform the instructions for extending Komodo
in order a functioning <code class="docutils literal notranslate"><span class="pre">pip</span></code> tool.</p>
</section>
<section id="getting-started-as-a-developer">
<h2>Getting started as a developer<a class="headerlink" href="#getting-started-as-a-developer" title="Permalink to this headline"></a></h2>
<p>The first thing to do, is to create a fork of subscript to your personal github
account. Go to <a class="reference external" href="https://github.com/equinor/subscript">https://github.com/equinor/subscript</a> and click the “Fork”
button.</p>
<p>Clone your fork to your local computer:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git clone git@github.com:&lt;youraccount&gt;/subscript</span>
<span class="go">cd subscript</span>
</pre></div>
</div>
<p>Then add the upstream repository:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git remote add upstream git@github.com:equinor/subscript</span>
</pre></div>
</div>
<p>This requires a valid login setup with SSH keys for you github account, needed
for write access.</p>
<p>After cloning, you need a Python virtual environment in which you install
subscript and its dependencies. If you develop on an Equinor computer you
should use <cite>komodoenv</cite> as outlined above, if not, you can create a new virtual
environment for subscript using the commands:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m venv venv-subscript</span>
<span class="go">source venv-subscript/bin/activate  # append &quot;.csh&quot; if c-shell</span>
</pre></div>
</div>
<p>and then run <code class="docutils literal notranslate"><span class="pre">pip</span></code> :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pip install -e &quot;.[tests,docs]&quot;</span>
</pre></div>
</div>
<p>to install subscript in “edit”-mode together will all the dependencies for
subscript, its test suite and documentation.</p>
<p>A good start is to verify that all tests pass after having cloned the
repository, which you can do by running:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pytest</span>
</pre></div>
</div>
</section>
<section id="repository-conventions">
<h2>Repository conventions<a class="headerlink" href="#repository-conventions" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Each tool has its own subdirectory under <code class="docutils literal notranslate"><span class="pre">src/subscript</span></code>.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> for installing endpoints that users should have in their <code class="docutils literal notranslate"><span class="pre">$PATH</span></code></p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">argparse</span></code>, and with a specific <code class="docutils literal notranslate"><span class="pre">get_parser()</span></code> function to facilitate <code class="docutils literal notranslate"><span class="pre">sphinx-argparse</span></code></p></li>
<li><p>Always use the <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">=</span> <span class="pre">&quot;__main__&quot;</span></code> idiom. Scripts should not start if they are
imported, this is to facilitate testing.</p></li>
<li><p>There must be at least test code that directly test that the endpoint is installed and
that it does at least something to a standard input. Preferably unit test code for
isolated parts of the code as well.</p></li>
<li><p>Docstrings on all functions. Docstrings can include RST formatting and will
be checked for compliance with sphinx on every pull request. Warnings from sphinx
must be fixed.</p></li>
<li><p>For a new script, write a new file <code class="docutils literal notranslate"><span class="pre">docs/scripts/scriptname.rst</span></code> describing
the script. Use sphinx-argparse to document the command line syntax.</p></li>
<li><p>Type hinting is encouraged. If type hinting is included in the source, it has to pass
mypy.</p></li>
</ul>
</section>
<section id="maintenance-responsibility">
<h2>Maintenance responsibility<a class="headerlink" href="#maintenance-responsibility" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Equinor (PETEC Reservoir Toolbox) maintains the repository infrastructure,
monitors that automated tests pass on updated dependencies, and ensures
deploy to Komodo is active.</p></li>
<li><p>Maintenance responsibility for each admitted script (response to bug reports
and adaptations to changes in dependencies) belongs to the Product Owner
in Equinor.</p></li>
<li><p>Scripts/changes admitted from actors external to Equinor will be maintained
by Equinor.</p></li>
<li><p>Unmaintained scripts that fail to pass tests will be removed.</p></li>
</ul>
</section>
<section id="open-source">
<h2>Open source<a class="headerlink" href="#open-source" title="Permalink to this headline"></a></h2>
<p>Subscript is both open source and closed source. The twin repository
<code class="docutils literal notranslate"><span class="pre">subscript-internal</span></code> holds similar infrastructure but with scripts that are
exempted from the Open Source requirement in TR1621. Internal or confidental
data should never be submitted to subscript. For each open script, there must
be accompanying public test data.</p>
</section>
<section id="code-style">
<h2>Code style<a class="headerlink" href="#code-style" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>PEP8 is the rule for naming of files, functions, classes, etc. Exception to
PEP8 is maximum width at 88 instead of PEP8’s 79; as 88 is the <code class="docutils literal notranslate"><span class="pre">black</span></code>
default</p></li>
<li><p>Use the black formatter to format your code</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">black</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">black</span> <span class="pre">&lt;modulename.py&gt;</span></code>, must be done prior to any pull request.</p></li>
</ul>
</li>
<li><p>Use flake8 code checker</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">flake8</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flake8</span> <span class="pre">src</span> <span class="pre">tests</span></code> must pass before any pull request is accepted</p></li>
<li><p>Exceptions are listed in <code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code></p></li>
</ul>
</li>
<li><p>Use pylint to improve coding</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pylint</span></code></p></li>
<li><p>Then run <code class="docutils literal notranslate"><span class="pre">pylint</span> <span class="pre">src</span></code></p></li>
<li><p>Deviations from default (strict) pylint are stored in <code class="docutils literal notranslate"><span class="pre">.pylintrc</span></code> at root level,
or as comments in the file e.g. <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">pylint:</span> <span class="pre">disable=broad-except</span></code>.</p></li>
<li><p>Only use deviations when e.g. black and pylint are in conflict, or if conformity with
pylint would clearly make the code worse or not work at all. Do not use it to
increase pylint score.</p></li>
</ul>
</li>
<li><p>Use “pre-commit” to enforce compliance before commit. Install using <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pre-commit</span></code>
and then run <code class="docutils literal notranslate"><span class="pre">pre-commit</span> <span class="pre">install</span></code> in the repository root. This will save you from
pushing code that will fail the code style tests required before merge.</p></li>
</ul>
</section>
<section id="building-documentation">
<h2>Building documentation<a class="headerlink" href="#building-documentation" title="Permalink to this headline"></a></h2>
<p>Assuming the developer instructions above, run the following command to to
build the documentation for subscript:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build_sphinx</span>
</pre></div>
</div>
<p>and then point your browser to the file <code class="docutils literal notranslate"><span class="pre">build/docs/index.html</span></code>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Subscript" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="history.html" class="btn btn-neutral float-right" title="History" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Equinor.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #ff1243;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #474747;
    }
    .wy-side-nav-search > div.version {
      color: white;
    }
  </style>


</body>
</html>